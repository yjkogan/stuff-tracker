[Unit]
Description=Stuff Tracker Backend Service
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/var/www/stuff-tracker
ExecStart=/var/www/stuff-tracker/server
Restart=always
RestartSec=3
Environment=RUST_LOG=info
Environment=DATABASE_URL=sqlite:data.db
Environment=PORT=3000
Environment=HOST=127.0.0.1
# Ensure uploads directory exists and is writable
ExecStartPre=/bin/mkdir -p /var/www/stuff-tracker/uploads

[Install]
WantedBy=multi-user.target
